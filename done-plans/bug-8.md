Bug 8 - Attachment failed

1. Below is an example of an email attachment that is failing to be read.
Error: [PDF content - extraction failed: pdfjsLib.getDocument is not a function]

Task - investigate the cause of the bug, plan a fix and also plan a way to tag an email as "Attachment read failed" so its easy to spot.

-- Example ---

Dear Mr Stafford
 
Students in Year 7 will be sitting the first round of formal summative assessments in all subjects between Monday, 02 February and Friday, 13 February 2026. Please find attached a letter containing further information.
 
Kind regards
 
Rodborough

Rodborough
Rake LaneMilfordGodalmingSurreyGU8 5BZ
 
t: 01483 411100
e: info@rodborough.surrey.sch.uk
w: https://www.rodborough.surrey.sch.uk/
The information contained within this e-mail / attachments are confidential. If you are not the intended recipient, please delete the message and attachments immediately and notify the sender. Any unauthorised dissemination or copying of this e-mail, or any misuse or wrongful disclosure of the information contained in it is strictly prohibited and may be illegal. The opinions, statements and thoughts expressed in this e-mail and its attachments if any are those of the individual sender and not necessarily of Rodborough or any associated party.

=== IMPORTANT: ATTACHMENT CONTENT BELOW ===
This email contains document attachments. Extract all relevant information:
- Key dates and deadlines → add to calendar_updates
- Payment requests → add to financials with amounts and deadlines
- Action items → mention in summary
- If forms require signature/action → add to attachments_requiring_review

--- START: Year 7 Assessment Window 1 (Feb 2026) - Parent letter .pdf ---
[PDF content - extraction failed: pdfjsLib.getDocument is not a function]
--- END: Year 7 Assessment Window 1 (Feb 2026) - Parent letter .pdf ---


=== END ATTACHMENT CONTENT ===